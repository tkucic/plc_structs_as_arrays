# PLC Using structs as arrays | [MAIN] | [NAMESPACES] | [METRICS] | [BACK]  

## Documentation for Program working_with_user_datatype_struct_arrays  

```pascal
INTERFACE
    VAR
        deviceCmds : UDT_Cmd32; (*Structure array that holds all devices commands*)
        deviceStatuses : UDT_Status32; (*Structure array that holds all devices statuses*)
        deviceCmd : UDT_Cmd; (*Structure that holds commands only of the device currently iterated*)
        deviceStatus : UDT_Status; (*Structure that holds status only of the device currently iterated*)
        i : USINT; (*Iterator*)
        getCmd : getUDT_Cmd32; (*Function block that retrieves a structure from UDT_Cmd32 struct array*)
        getStatus : getUDT_Status32; (*Function block that retrieves a structure from UDT_Status32 struct array*)
    END_VAR
END_INTERFACE
PROGRAM working_with_user_datatype_struct_arrays:
    // WORKING WITH USER DATA TYPE STRUCT ARRAYS

    FOR i:=0 TO 31 DO
    	//For easier data manipulation, extract current devices commands and status
    	//Now the getters must be function blocks as we cannot return as structure in iec
    	getCmd(data:=deviceCmds, ix:=i);
    	getStatus(data:=deviceStatuses, ix:=i);
    	deviceCmd := getCmd.Out;
    	deviceStatus := getStatus.Out;
    	
    	//If device is running, set the reference to 200
    	IF deviceStatus.Running THEN
    		deviceCmd.Ref := 200;
    	ELSE
    		deviceCmd.Ref := 0;
    	END_IF
    	
    	//Reset device only if it has stopped
    	deviceCmd.ResetCmd := deviceStatus.ResetRequired AND NOT deviceStatus.Running;
    	
    	//Start/Stop the device by writing to deviceCmds.udt_cmdXX from the init window*)
    	deviceCmd.StartCmd := (deviceCmd.StartCmd OR deviceStatus.Running) AND NOT (deviceStatus.ResetRequired OR deviceCmd.StopCmd);
    	
    	//Finally write the new command data to the array
    	//As we always return TRUE or FALSE we can keep this as a function
    	setUDT_Cmd32(deviceCmds, i, deviceCmd);
    	
    END_FOR
    // Manipulate the deviceStatuses from the init window
END_PROGRAM
```

## Metrics  

| VAR_IN | VAR_OUT | VAR_IN_OUT | VAR_LOCAL | VAR_EXTERNAL | VAR_GLOBAL | VAR_ACCESS | VAR_TEMP |
| ------ | ------- | ---------- | --------- | ------------ | ---------- | ---------- | -------- |
| 0 | 0 | 0 | 7 | 0 | 0 | 0 | 0 |

| Actions | Lines of code | Maintainable size |
| ------- | ------------- | ----------------- |
| 0 | 29 | 36 |

---
Autogenerated with [ia_tools](https://github.com/tkucic/ia_tools)  

[MAIN]: ../../../../index_st.md
[NAMESPACES]: ../../nsList_st.md
[METRICS]: ../../../metrics_st.md
[BACK]: ../nsMain_st.md
